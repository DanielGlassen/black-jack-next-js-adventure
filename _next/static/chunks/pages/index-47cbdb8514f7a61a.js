(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7662:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var r,a,c,o,s,l=n(7294),u=n(9008),i=n.n(u),m=n(1664),d=n.n(m),p=n(5291),f=n.n(p),h=n(6687),v=n(29),b=n(4687),E=n.n(b),g=n(4720),x=n.n(g),_=function(e){var t=e.onPlaceBet,n=e.lastBet,r=void 0===n?null:n,a=e.balance,c=void 0===a?1e3:a,o=(0,l.useState)(10),s=o[0],u=o[1];return(0,l.useEffect)(function(){r&&u(r)},[r]),l.createElement("div",{className:"bet-container container"},l.createElement("h3",null,"Place your bet"),l.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center mt-4"},l.createElement("select",{value:c<s?c:s,className:"form-control",onChange:function(e){u(parseInt(e.target.value,10))}},l.createElement("option",{disabled:c<10,value:"10"},"$10"),l.createElement("option",{disabled:c<20,value:"20"},"$20"),l.createElement("option",{disabled:c<30,value:"30"},"$30"),l.createElement("option",{disabled:c<40,value:"40"},"$40"),l.createElement("option",{disabled:c<50,value:"50"},"$50"),l.createElement("option",{disabled:c<60,value:"60"},"$60"),l.createElement("option",{disabled:c<70,value:"70"},"$70"),l.createElement("option",{disabled:c<80,value:"80"},"$80"),l.createElement("option",{disabled:c<90,value:"90"},"$90"),l.createElement("option",{disabled:c<100,value:"100"},"$100")),l.createElement("button",{onClick:function(){t(s)},className:"btn btn-outline-info px-4 w-25"},"Place Bet")))},y=n(3967),w=n.n(y),k=function(e){var t=e.card.image;return l.createElement("div",{className:"jsx-2134687587 card-container"},l.createElement("img",{src:t,alt:"Card",className:"jsx-2134687587 card"}),l.createElement(w(),{id:"2134687587"},[".card-container.jsx-2134687587{display:inline-block;margin:0 5px;}",".card.jsx-2134687587{width:80px;height:auto;border-radius:5px;-webkit-user-drag:none;-moz-user-drag:none;-ms-user-drag:none;user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]))},A=function(){return l.createElement("div",{className:"d-flex justify-content-center align-items-center vh-100"},l.createElement("div",{className:"spinner-border text-primary",role:"status"},l.createElement("span",{className:"visually-hidden"},"Loading...")))},N=function(e){e.playerId;var t=e.balance,n=(e.bet,e.loading);return l.createElement("div",{style:{textAlign:"center",marginBottom:"20px"}},n?l.createElement(A,null):l.createElement("p",null,"Balance: $",t))},H="https://deckofcardsapi.com/api/deck",S=(r=(0,v.Z)(E().mark(function e(){var t,n;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(H,"/new/shuffle/?deck_count=1"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.deck_id);case 7:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),j=(a=(0,v.Z)(E().mark(function e(t,n){var r,a;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(H,"/").concat(t,"/draw/?count=").concat(n));case 3:if((r=e.sent).ok){e.next=10;break}if(404!==r.status){e.next=9;break}throw Error("Deck or endpoint not found: ".concat(r.status," ").concat(r.statusText));case 9:throw Error("Failed to draw cards: ".concat(r.status," ").concat(r.statusText));case 10:return e.next=12,r.json();case 12:return a=e.sent,e.abrupt("return",a.cards);case 16:throw e.prev=16,e.t0=e.catch(0),console.error("Error in drawCards:",e.t0),e.t0;case 20:case"end":return e.stop()}},e,null,[[0,16]])})),function(e,t){return a.apply(this,arguments)});function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=function(e){var t=e.value;return["KING","QUEEN","JACK"].includes(t)?10:"ACE"===t?11:parseInt(t,10)},C=(c=(0,v.Z)(E().mark(function e(t){var n,r,a,c,o,s;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,r=0,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,void 0)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}(t);try{for(a.s();!(c=a.n()).done;)o=c.value,s=B(o),11===s&&r++,n+=s}catch(e){a.e(e)}finally{a.f()}for(;n>21&&r>0;)n-=10,r--;return e.abrupt("return",n);case 6:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)}),I=(o=(0,v.Z)(E().mark(function e(t,n,r){var a,c,o;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t);case 3:return a=e.sent,e.next=6,C(n);case 6:c=e.sent;case 7:if(!(c<17)){e.next=17;break}return e.next=10,j(r,1);case 10:return o=e.sent,n.push(o[0]),e.next=14,C(n);case 14:c=e.sent,e.next=7;break;case 17:if(!(a>21)){e.next=21;break}return e.abrupt("return","dealer");case 21:if(!(c>21)){e.next=25;break}return e.abrupt("return","player");case 25:if(!(a>c)){e.next=29;break}return e.abrupt("return","player");case 29:if(!(a<c)){e.next=31;break}return e.abrupt("return","dealer");case 31:return e.abrupt("return","push");case 34:throw e.prev=34,e.t0=e.catch(0),console.error("Error determining game result:",e.t0),e.t0;case 38:case"end":return e.stop()}},e,null,[[0,34]])})),function(e,t,n){return o.apply(this,arguments)}),L=(s=(0,v.Z)(E().mark(function e(t,n){var r,a,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:return r=e.sent,e.next=6,j(r,2);case 6:return a=e.sent,e.next=9,j(r,2);case 9:return c=e.sent,e.abrupt("return",{deckId:r,playerId:t,playerHand:a,dealerHand:c});case 13:throw e.prev=13,e.t0=e.catch(0),console.error("Error initializing game:",e.t0),e.t0;case 17:case"end":return e.stop()}},e,null,[[0,13]])})),function(e,t){return s.apply(this,arguments)});n(2935),n(2655);var O=function(e){var t=e.message,r=e.type;return n(8307).notify(t,r,3),null},P=n(6878),$=function(){var e,t,n,r,a,c=(0,l.useState)(null),o=c[0],s=c[1],u=(0,l.useState)([]),i=u[0],m=u[1],d=(0,l.useState)([]),p=d[0],f=d[1],b=(0,l.useState)(null),g=b[0],y=b[1],w=(0,l.useState)(!1),H=w[0],S=w[1],Z=(0,l.useState)(1e3),B=Z[0],$=Z[1],V=(0,l.useState)(0),F=V[0],M=V[1],Y=(0,l.useState)("initial"),X=Y[0],R=Y[1],G=(0,l.useState)(null),T=G[0],U=G[1],D=(0,l.useState)(!1),K=D[0],Q=D[1],z=(0,l.useState)(!1),W=(z[0],z[1]),J=(0,l.useState)(!0),q=J[0],ee=J[1];(0,l.useEffect)(function(){var e;(0,P.hm)((e=(0,v.Z)(E().mark(function e(t){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return s(t),e.next=4,(0,P.dM)(t);case 4:$(e.sent),ee(!1),e.next=11;break;case 9:s(null),$(1e3);case 11:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}))},[]);var et=(e=(0,v.Z)(E().mark(function e(t){var n;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(o,t);case 3:m((n=e.sent).playerHand),f(n.dealerHand),y(n.deckId),M(t),R("playing"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error placing bet:",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])})),function(t){return e.apply(this,arguments)}),en=(t=(0,v.Z)(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(g,1);case 3:return t=e.sent,m(function(e){return[].concat((0,h.Z)(e),(0,h.Z)(t))}),e.next=7,er([].concat((0,h.Z)(i),(0,h.Z)(t)));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error handling hit:",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(){return t.apply(this,arguments)}),er=(n=(0,v.Z)(E().mark(function e(t){var n;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t);case 3:if(!((n=e.sent)>21)){e.next=9;break}return e.next=7,ec("dealer");case 7:e.next=12;break;case 9:if(21!==n){e.next=12;break}return e.next=12,ea();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error checking player hand:",e.t0);case 17:case"end":return e.stop()}},e,null,[[0,14]])})),function(e){return n.apply(this,arguments)}),ea=(r=(0,v.Z)(E().mark(function e(){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{Q(!0),R("stand")}catch(e){console.error("Error handling stand:",e)}case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)});(0,l.useEffect)(function(){var e,t=(e=(0,v.Z)(E().mark(function e(){var t;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(i,p,g);case 2:return t=e.sent,e.next=5,ec(t);case 5:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});"stand"===X&&2===p.length&&t()},[p,X,g,ec,i]);var ec=(a=(0,v.Z)(E().mark(function e(t){var n,r,a,c,s,l,u,m=arguments;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]&&m[1],null!==t){e.next=3;break}return e.abrupt("return");case 3:return S(!0),r="",a="success",c=0,e.next=9,C(i);case 9:return s=e.sent,e.next=12,C(p);case 12:return l=e.sent,s>21?(r="You lose - busted!",c=-F,a="error"):l>21?(r="You win - dealer busted!",c=F):!0===n?(r="Blackjack!",c=1.5*F):"player"===t?(r="You win!",c=F):"dealer"===t?(r="You lose!",c=-F,a="error"):(r="It's a draw!",a="warning"),O({message:r,type:a}),$(u=B+c),e.prev=17,e.next=20,(0,P.j4)(o,u);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(17),console.error("Error updating balance in Firebase:",e.t0);case 25:W(!0),U(F);case 27:case"end":return e.stop()}},e,null,[[17,22]])})),function(e){return a.apply(this,arguments)});return l.createElement(l.Fragment,null,q?l.createElement(A,null):l.createElement(l.Fragment,null,B<10&&l.createElement("div",{className:"game-container text-center"},l.createElement("div",{className:x().jumbotron+" d-flex flex-column align-items-center justify-content-center"},l.createElement("h4",{className:"display-6"},"Your balance is less than $10, you can refresh the page to join the new game."))),B>=10&&l.createElement("div",{className:"game-container text-center"},l.createElement("div",{className:"dealer"},"initial"!==X&&l.createElement("h2",null,"Dealer"),l.createElement("div",{className:"dealer-hand"},p.map(function(e,t){return l.createElement(k,{key:t,card:e,hidden:0===t&&!K})}))),l.createElement("div",{className:"player mt-5"},"initial"!==X&&l.createElement("h2",null,"Player"),l.createElement(N,{playerId:o,balance:B,bet:F,loading:q}),"playing"===X?l.createElement("p",null,"Current Bet: $",F):"","playing"===X&&l.createElement("div",{className:"player-hand"},i.map(function(e,t){return l.createElement(k,{key:t,card:e})})),"initial"===X&&!H&&l.createElement(_,{onPlaceBet:et,lastBet:T,balance:B})),"playing"===X&&l.createElement("div",{className:"buttonArea d-flex flex-row align-items-center justify-content-center mt-4"},!H&&l.createElement(l.Fragment,null,l.createElement("button",{className:"standButton btn btn-outline-warning px-4 me-3",onClick:ea},"Stand"),l.createElement("button",{className:"hitButton btn btn-success px-4",onClick:en},"Hit"))),H&&l.createElement("div",{className:"buttonArea d-flex flex-row align-items-center justify-content-center mt-4"},l.createElement("button",{className:"restartButton btn btn-outline-primary px-4",onClick:function(){m([]),f([]),S(!1),M(0),y(null),R("initial"),Q(!1)}},"Restart")))))},V=n(678),F=n(5675),M=n.n(F),Y=n(1169);function X(){var e=(0,l.useContext)(V.V),t=e.user,n=e.setUser,r=e.email,a=(0,l.useContext)(V.V).auth,c=(0,l.useState)(!0),o=c[0],s=c[1];return((0,l.useEffect)(function(){var e=a.onAuthStateChanged(function(e){n(e),s(!1)});return function(){return e()}},[a,n]),o)?l.createElement(A,null):l.createElement("div",null,l.createElement(i(),null,l.createElement("title",null,"Black Jack")),l.createElement("div",{className:f().container},t?l.createElement("main",{className:f().main},l.createElement("div",{className:f().toolbar},l.createElement("p",{className:f().email},r),l.createElement("button",{className:"btn btn-outline-info px-4 w-20",onClick:function(){(0,P.w7)(a).then(function(){n(null)}).catch(function(e){console.log(e)})}},"Logout")),l.createElement("div",{className:f().game},l.createElement($,null))):l.createElement(l.Fragment,null,l.createElement("div",{className:f().cover},l.createElement(M(),{src:Y.Z,width:500,height:300,alt:"Logo"})),l.createElement("main",{className:f().auth},l.createElement(d(),{href:"/login",passHref:!0},l.createElement("button",{className:"btn btn-outline-info px-4 w-20"},"Login")),"\xa0\xa0\xa0",l.createElement(d(),{href:"/signup",passHref:!0},l.createElement("button",{className:"btn btn-outline-info px-4 w-20"},"Get Register"))))))}},5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7662)}])},1169:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.75cfbbd5.png",height:300,width:700,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAPFBMVEWIcnLHamzXg4dQTEyBgYKDgoLHjI+vlJdZg5emhoqLiYnKcHSBfH1qR0nRkJNpdHaMXWPpmJy2j5Fzc3StuFXuAAAAEnRSTlMXYOx+t+O3MgYic4zTj8mKV3eZ8QgLAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAI0lEQVR4nGNg5+fm5RLkZGdgEeZhFWLiY2PgZOBgFGBm4AAADQkA1wPfVEgAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3}},4720:function(e){e.exports={jumbotron:"Game_jumbotron__MSCi4"}},5291:function(e){e.exports={container:"Home_container__d256j",toolbar:"Home_toolbar__W9Pv0",email:"Home_email__O2SwA","user-email":"Home_user-email__2MuBi",button:"Home_button__G93Ef",main:"Home_main__VkIEL",auth:"Home_auth__pEZ6M",cover:"Home_cover__2L3ka",game:"Home_game__fUhPM",title:"Home_title__hYX6j",description:"Home_description__uXNdx",code:"Home_code__VVrIr",grid:"Home_grid__AVljO",card:"Home_card__E5spL",center:"Home_center__O_TIN",logo:"Home_logo__IOQAX",thirteen:"Home_thirteen__sqGDr",rotate:"Home_rotate__c5eru",content:"Home_content__tkQPU",vercelLogo:"Home_vercelLogo___BVuc"}}},function(e){e.O(0,[675,999,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);